<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>超声成像知识图谱（思维导图） · 杜康瑞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
        "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC",
        "Microsoft YaHei", sans-serif;
      background: linear-gradient(135deg, #e8f3ff 0%, #e2f9f0 40%, #ffffff 100%);
      color: #123;
    }

    header {
      padding: 16px 32px;
    }

    h1 {
      margin: 0;
      font-size: 24px;
      font-weight: 700;
    }

    header p {
      margin: 6px 0 0;
      font-size: 14px;
      opacity: 0.8;
    }

    #mindmap-wrapper {
      height: calc(100vh - 80px);
      padding: 0 16px 16px;
    }

    #mindmap-wrapper-inner {
      background: #ffffff;
      border-radius: 18px;
      box-shadow: 0 18px 45px rgba(15, 77, 173, 0.18);
      height: 100%;
      padding: 12px;
      overflow: hidden;
    }

    svg#mindmap {
      width: 100%;
      height: 100%;
    }
  </style>

  <!-- d3 + markmap（手动版本） -->
  <script src="https://cdn.jsdelivr.net/npm/d3@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.6.7/dist/browser/view.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.6.7/dist/browser/index.min.js"></script>
</head>

<body>
  <header>
    <h1>超声成像知识图谱（思维导图）</h1>
    <p>点击节点可展开 / 收起；拖动画面，滚轮缩放，自由浏览知识结构。</p>
  </header>

  <div id="mindmap-wrapper">
    <div id="mindmap-wrapper-inner">
      <!-- 思维导图画布 -->
      <svg id="mindmap"></svg>

      <!-- 用 textarea 存放 markdown 文本（隐藏） -->
      <textarea id="mindmap-md" style="display:none;">
# 超声成像 Ultrasound Imaging

## 物理基础
### 声束与介质
- 声速
- 声阻抗与界面反射
- 衰减、散射与漫反射

### 超声波特性
- 频率与波长
- 声束宽度与焦点
- 近场 / 远场

### 能量与安全
- 声强与声压
- 热效应
- 机械效应
- 安全参数（MI, TI）

## 探头与成像模式
### 探头类型
- 线阵探头
- 相控阵探头
- 曲阵探头
- 高频小探头

### 成像模式
- A 型（A-mode）
- B 型（B-mode）
- M 型（M-mode）
- 多普勒成像
  - PW / CW
  - 彩色多普勒（CDFI）
  - 能量多普勒（PDI）

## 图像形成与优化
### 扫描与接收
- 发送脉冲
- 回声接收
- 聚焦与延时求和
- 动态聚焦

### 图像处理
- 时间增益补偿（TGC）
- 动态范围
- 灰阶映射
- 伪彩色显示

### 画质优化
- 深度、焦点设置
- 频率选择
- 帧频与空间分辨率
- 伪影识别与抑制

## 高级成像技术
### 谐波成像
- 组织谐波成像（THI）
- 对比增强谐波（CEUS）

### 造影与血流
- 超声造影剂
- 微泡动力学
- 灌注评估

### 组织定量
- 超声弹性成像
  - 变形法
  - Shear-wave
- 定量血流成像

## 临床应用
### 腹部超声
- 肝胆胰脾
- 肾脏与泌尿系统
- 血管评估

### 心脏超声
- 心腔与瓣膜
- 心功能评价
- 先心病

### 产科与妇科
- 胎儿系统筛查
- 妇科肿瘤评估

### 其他系统
- 颈部与甲状腺
- 乳腺与浅表器官
- 肌骨超声

## 质量控制与安全
### 设备与校准
- 性能测试
- 幻影与标准测试
- 探头维护

### 操作者
- 扫查规范
- 报告规范
- 持续教育（CME）

### 病人安全
- 适应证与禁忌证
- 暴露时间控制
- 信息沟通与告知
      </textarea>
    </div>
  </div>

  <script>
    // 读取 markdown 文本
    const md = document.getElementById('mindmap-md').value;

    const { Transformer } = window.markmapLib;
    const { Markmap, loadCSS, loadJS } = window.markmap;

    const transformer = new Transformer();
    const { root, features } = transformer.transform(md);
    const { styles, scripts } = transformer.getAssets(features);

    // 加载 markmap 所需的额外资源（如语法高亮等）
    if (styles) loadCSS(styles);
    if (scripts) loadJS(scripts, { getMarkmap: () => window.markmap });

    // 创建思维导图
    Markmap.create('#mindmap', {}, root);
  </script>
</body>
</html>
